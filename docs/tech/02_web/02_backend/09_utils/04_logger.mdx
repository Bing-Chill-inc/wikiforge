# Logger

## Description G√©n√©rale

Le fichier `logger.ts` contient une classe utilitaire appel√©e `Logger` qui permet de journaliser des messages, avertissements, erreurs, et informations de d√©bogage. Les logs sont affich√©s dans la console et enregistr√©s dans des fichiers journaux. Ce syst√®me de journalisation est con√ßu pour remplacer les appels √† `console.log()` et fournir une solution centralis√©e et structur√©e pour la gestion des logs.

---

## Fonctionnalit√©s Principales

### 1. **Journalisation Structur√©e**

-   Les messages sont format√©s avec des horodatages, des niveaux de log (INFO, WARN, ERROR, DEBUG), et des couleurs pour une meilleure lisibilit√© dans la console.

### 2. **Enregistrement dans des Fichiers**

-   Les logs sont enregistr√©s dans des fichiers journaux situ√©s dans un dossier `logs/`. Un fichier est cr√©√© pour chaque jour.

### 3. **Support des Niveaux de D√©bogage**

-   Les messages de d√©bogage sont affich√©s uniquement si le mode d√©bogage est activ√© via la variable d'environnement `DEBUG`.

### 4. **Cr√©ation Automatique du Dossier `logs/`**

-   Si le dossier `logs/` n'existe pas, il est automatiquement cr√©√©.

---

## Classe : `Logger`

### Description

La classe `Logger` est une classe utilitaire statique qui ne peut pas √™tre instanci√©e. Elle fournit des m√©thodes pour journaliser diff√©rents types de messages.

### Attributs Statique

-   **`filePath`** : Chemin du dossier o√π les fichiers journaux sont enregistr√©s (par d√©faut : `logs/` dans le r√©pertoire courant).

---

### M√©thodes

#### 1. **`log`**

-   Journalise un message d'information.
-   Affiche le message dans la console avec un symbole ‚ÑπÔ∏è et l'enregistre dans un fichier journal.

##### Signature

```typescript
static log(message: string, exec: string = "", color: clic.Format = clic.white): void
```

##### Param√®tres

-   **`message`** : Message √† journaliser.
-   **`exec`** : Chemin ou contexte d'origine du message (optionnel).
-   **`color`** : Couleur du message dans la console (par d√©faut : blanc).

##### Exemple

```typescript
Logger.log("Application d√©marr√©e avec succ√®s", "app:startup");
```

---

#### 2. **`warn`**

-   Journalise un avertissement.
-   Affiche le message dans la console avec un symbole ‚ö†Ô∏è en jaune et l'enregistre dans un fichier journal.

##### Signature

```typescript
static warn(message: string, exec: string = ""): void
```

##### Exemple

```typescript
Logger.warn("Espace disque faible", "system:monitor");
```

---

#### 3. **`error`**

-   Journalise une erreur.
-   Affiche le message dans la console avec un symbole ‚ùó en rouge et l'enregistre dans un fichier journal.

##### Signature

```typescript
static error(message: string, exec: string = ""): void
```

##### Exemple

```typescript
Logger.error("Erreur de connexion √† la base de donn√©es", "db:connection");
```

---

#### 4. **`debug`**

-   Journalise un message de d√©bogage.
-   Affiche le message dans la console avec un symbole üîß et l'enregistre dans un fichier journal uniquement si le mode d√©bogage est activ√© (`DEBUG=true`).

##### Signature

```typescript
static debug(message: string, exec: string, level: number = 1): void
```

##### Param√®tres

-   **`message`** : Message de d√©bogage.
-   **`exec`** : Contexte ou chemin d'origine du message.
-   **`level`** : Niveau de d√©bogage (par d√©faut : 1). Le message est affich√© uniquement si `DEBUG_LEVEL` est sup√©rieur ou √©gal √† ce niveau.

##### Exemple

```typescript
Logger.debug("Chargement des donn√©es utilisateur", "user:service", 2);
```

---

## Fonctions Utilitaires

### 1. **`initLogFile`**

-   Initialise le fichier journal pour la journ√©e en cours.
-   Cr√©e le dossier `logs/` s'il n'existe pas.

##### Exemple

```typescript
const logFilePath = initLogFile("logs/");
```

---

### 2. **`parsingConsole`**

-   Formate un message pour l'affichage dans la console.
-   Ajoute un horodatage, un style, et une couleur.

##### Exemple

```typescript
const formattedMessage = parsingConsole("Message d'information", clic.green, "‚ÑπÔ∏è", "app:startup");
```

---

### 3. **`parsingFile`**

-   Formate un message pour l'enregistrement dans un fichier journal.
-   Ajoute un horodatage et un style.

##### Exemple

```typescript
const formattedLog = parsingFile("Message d'information", "INFO", "app:startup");
```

---

### 4. **`writeLog`**

-   √âcrit un message format√© dans le fichier journal.

##### Exemple

```typescript
writeLog("Message d'information", "INFO", "app:startup", "logs/");
```

---

## Points Techniques

### 1. **Utilisation de `cli-color`**

-   La biblioth√®que **cli-color** est utilis√©e pour ajouter des couleurs aux messages affich√©s dans la console.

### 2. **Gestion des Fichiers**

-   Les fichiers journaux sont cr√©√©s automatiquement avec un nom bas√© sur la date (`YYYY-MM-DD.log`).
-   Les messages sont ajout√©s au fichier correspondant √† la journ√©e en cours.

### 3. **Support des Niveaux de D√©bogage**

-   Les messages de d√©bogage sont affich√©s uniquement si la variable d'environnement `DEBUG` est d√©finie √† `true`.
-   Le niveau de d√©bogage est contr√¥l√© par la variable `DEBUG_LEVEL`.

---

## Exemple d'Utilisation

### Journalisation dans une Application

```typescript
import { Logger } from "../utils/logger";

Logger.log("Application d√©marr√©e", "app:startup");
Logger.warn("Espace disque faible", "system:monitor");
Logger.error("Erreur critique", "system:crash");
Logger.debug("Chargement des donn√©es utilisateur", "user:service", 2);
```

### Configuration dans `.env`

```env
DEBUG=true
DEBUG_LEVEL=2
```

---

## Avantages

1. **Centralisation des Logs** :

    - Toutes les op√©rations de journalisation passent par la classe `Logger`, ce qui facilite la gestion et la maintenance.

2. **Lisibilit√© Am√©lior√©e** :

    - Les messages sont format√©s avec des couleurs et des horodatages, ce qui am√©liore leur lisibilit√© dans la console.

3. **Persistance des Logs** :

    - Les messages sont enregistr√©s dans des fichiers journaux, permettant une analyse ult√©rieure.

4. **Support des Niveaux de D√©bogage** :
    - Les d√©veloppeurs peuvent contr√¥ler la quantit√© de messages de d√©bogage affich√©s en ajustant le niveau de d√©bogage.
